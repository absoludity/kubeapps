syntax = "proto3";
package kubeapps.api.packages.v1;
option go_package = "github.com/kubeapps/kubeapps/cmd/kubeapps-api-service/core/packages/v1";

// Each packages.v1 plugin should implement the following service:
//
// service Packages {
//   // More to come.
//   rpc GetAvailablePackages(GetAvailablePackagesRequest) returns (stream AvailablePackage)
// }
//
// Standard request and response messages for each required function are defined
// below for import and re-use.

// A PackageRepository is identified by a name and optionally a specific namespace.
message PackageRepository {
  string name = 1;
  string namespace = 2;
}

// An AvailablePackage defines a package available for installation.
message AvailablePackage {
  // The name of the package.
  string name = 1;

  // The package repository where this package is located.
  PackageRepository repository = 2;

  // The latest version of the package in the repository.
  string latest_version = 3;

  // A url for an icon.
  string icon_url = 4;
}

message GetAvailablePackagesRequest {
  // A namespace can be provided if the packages available for install in a
  // specific namespace are required.
  string namespace = 1;
  // TODO: Add standard filters.
}
